<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Fashion Portfolio</title>
    <style>
        @font-face {
            font-family: 'CustomFont';
            src: url('analogue55regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'CustomFont', sans-serif;
            background-color: #ffffff;
            color: #000;
            line-height: 1.1;
            font-weight: 500;
            font-size: 24px;
            height: 100vh;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            position: fixed;
            width: 100%;
        }

        .container {
            height: 100vh;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        header {
            position: fixed;
            top: 40px;
            left: 40px;
            width: calc(33.33vw - 80px);
            max-width: calc(33.33vw - 80px);
            z-index: 10;
            text-align: justify;
        }

        .logo {
            font-size: 24px;
            font-weight: 500;
            color: #000;
            text-decoration: none;
            letter-spacing: 0;
            display: block;
            margin-bottom: 2px;
            text-align: justify;
        }

        .about, .contact {
            font-size: 24px;
            font-weight: 500;
            color: #000;
            text-decoration: none;
            cursor: pointer;
            letter-spacing: 0;
            display: block;
            margin-bottom: 2px;
            text-align: justify;
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
        }

        .about:hover, .contact:hover {
            opacity: 0.7;
        }

        .about:active, .contact:active {
            opacity: 0.5;
        }

        .projects-section {
            margin-top: 0;
        }

        .project-item {
            display: block;
            cursor: pointer;
            transition: opacity 0.3s ease;
            font-size: 24px;
            font-weight: 500;
            color: #000;
            text-decoration: none;
            margin-bottom: 2px;
            letter-spacing: 0;
            word-wrap: break-word;
            line-height: 1.3;
            text-align: justify;
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
        }

        .project-item:hover {
            opacity: 0.6;
        }

        .project-item:active {
            opacity: 0.4;
        }

        .project-item:visited {
            color: #000;
        }

        .pdf-viewer {
            position: fixed;
            top: 120px;
            right: 40px;
            width: min(700px, 55vw);
            height: calc(100vh - 200px);
            display: none;
            z-index: 15;
            background: #ffffff;
            border: 4px solid #000;
            overflow: hidden;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            will-change: transform;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .pdf-viewer.dragging {
            cursor: grabbing;
            cursor: -webkit-grabbing;
        }

        .drag-handle {
            position: absolute;
            top: -15px;
            left: 0;
            right: 0;
            height: 40px;
            cursor: move;
            cursor: -webkit-grab;
            cursor: grab;
            z-index: 30;
            background: transparent;
            touch-action: none;
            -webkit-touch-callout: none;
        }

        .drag-handle:active {
            cursor: grabbing;
            cursor: -webkit-grabbing;
        }

        .pdf-viewer iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: #ffffff;
            margin: 0;
            padding: 0;
            pointer-events: auto;
            -webkit-overflow-scrolling: touch;
        }

        .pdf-viewer.dragging iframe {
            pointer-events: none;
        }

        /* iPad Safari PDF container */
        .pdf-container {
            width: 100%;
            height: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            background: #ffffff;
        }

        .pdf-container iframe {
            width: 100%;
            min-height: 100%;
            height: auto;
            border: none;
            display: block;
        }

        /* Alternative PDF embed for problematic cases */
        .pdf-embed-container {
            width: 100%;
            height: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            background: #f5f5f5;
            display: flex;
            flex-direction: column;
        }

        .pdf-embed-container embed {
            width: 100%;
            flex: 1;
            min-height: 100%;
        }

        .pdf-embed-container object {
            width: 100%;
            flex: 1;
            min-height: 100%;
        }

        .about-content, .contact-content {
            width: 100%;
            height: 100%;
            padding: 40px;
            background: #ffffff;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .about-content {
            text-align: justify;
        }

        .contact-content {
            text-align: center;
        }

        .about-content p, .contact-content p {
            font-size: 24px;
            font-weight: 500;
            line-height: 1.6;
            letter-spacing: 0;
            color: #000;
            margin-bottom: 10px;
            text-align: inherit;
        }

        .contact-content a {
            font-size: 24px;
            font-weight: 500;
            line-height: 1.6;
            letter-spacing: 0;
            color: #000;
            text-decoration: none;
            margin-bottom: 10px;
            display: block;
            transition: opacity 0.3s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .contact-content a:hover, .contact-content a:active {
            opacity: 0.6;
        }

        .close-pdf, .pdf-close {
            position: absolute;
            top: 35px;
            right: 10px;
            background: none;
            border: none;
            width: 30px;
            height: 30px;
            font-size: 24px;
            cursor: pointer;
            z-index: 35;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: normal;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .close-pdf {
            color: #000000;
        }

        .pdf-close {
            color: #ffffff;
        }

        .pdf-viewer.active {
            display: block;
        }

        /* Enhanced mobile/tablet styles */
        @media (max-width: 1024px) {
            body {
                font-size: 20px;
            }
            
            .container {
                padding: 30px;
            }
            
            header {
                top: 30px;
                left: 30px;
                width: calc(50vw - 60px);
                max-width: calc(50vw - 60px);
            }

            .logo, .about, .contact, .project-item {
                font-size: 20px;
            }

            .pdf-viewer {
                width: min(500px, 75vw);
                top: 100px;
                right: 30px;
                height: calc(100vh - 160px);
            }

            .about-content, .contact-content {
                padding: 30px;
            }

            .about-content p, .contact-content p, .contact-content a {
                font-size: 18px;
            }

            .drag-handle {
                height: 50px;
                top: -20px;
            }

            .close-pdf, .pdf-close {
                width: 40px;
                height: 40px;
                font-size: 20px;
                top: 30px;
                right: 5px;
            }
        }

        @media (max-width: 768px) {
            body {
                font-size: 18px;
            }
            
            .container {
                padding: 20px;
            }
            
            header {
                top: 20px;
                left: 20px;
                width: calc(60vw - 40px);
                max-width: calc(60vw - 40px);
            }

            .logo, .about, .contact, .project-item {
                font-size: 18px;
                line-height: 1.4;
            }

            .pdf-viewer {
                top: 80px;
                right: 20px;
                left: 20px;
                width: calc(100vw - 40px);
                height: calc(100vh - 140px);
            }

            .about-content, .contact-content {
                padding: 25px;
            }

            .about-content p, .contact-content p, .contact-content a {
                font-size: 16px;
                line-height: 1.5;
            }
        }

        @media (max-width: 480px) {
            header {
                width: calc(100vw - 40px);
                max-width: calc(100vw - 40px);
            }
        }

        /* iPad specific fixes */
        @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
            body {
                -webkit-text-size-adjust: none;
            }
            
            .pdf-viewer iframe {
                -webkit-overflow-scrolling: auto;
            }
            
            .drag-handle {
                height: 60px;
                top: -25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="#" class="logo">Catalina Chaverra Brown</a>
            <a href="#" class="about" data-action="about">About</a>
            <a href="#" class="contact" data-action="contact">Contact</a>
            
            <div class="projects-section">
                <a href="#" class="project-item" data-pdf="essays/stays-and-femininity.pdf" data-project="stays">01 — How did stays construct the idea of femininity in the 18th century?</a>
                <a href="#" class="project-item" data-pdf="essays/keffiyeh.pdf" data-project="keffiyeh">02 — How has the keffiyeh responded to the legacies of colonialism, in the 20th and 21st centuries?</a>
                <a href="#" class="project-item" data-pdf="essays/tatreez.pdf" data-project="tatreez">03 — Tatreez and the evolution of resistance</a>
                <a href="#" class="project-item" data-pdf="essays/meta-vaux-warwick-fuller.pdf" data-project="meta">04 — During the Harlem Renaissance, how did Meta Vaux Warrick Fuller's 'Ethiopia Awakening' (1921) challenge Eurocentric beauty ideals for African American women?</a>
                <a href="#" class="project-item" data-pdf="essays/roxanne-shante.pdf" data-project="roxanne">05 — Roxanne Shanté 12" LP Poster Zine</a>
            </div>
        </header>
    </div>

    <script>
        let openPDFs = {};
        let dragData = {};
        let highestZIndex = 15;
        let isDragging = false;

        // Enhanced device detection
        function getDeviceType() {
            const userAgent = navigator.userAgent.toLowerCase();
            const isIPad = /ipad/.test(userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
            const isIPhone = /iphone|ipod/.test(userAgent);
            const isAndroidTablet = /android/.test(userAgent) && !/mobile/.test(userAgent);
            const isAndroidPhone = /android/.test(userAgent) && /mobile/.test(userAgent);
            
            return {
                isIPad: isIPad,
                isIPhone: isIPhone,
                isAndroidTablet: isAndroidTablet,
                isAndroidPhone: isAndroidPhone,
                isMobile: isIPhone || isAndroidPhone,
                isTablet: isIPad || isAndroidTablet,
                canEmbedPDF: isIPad || isAndroidTablet || (!isIPhone && !isAndroidPhone)
            };
        }

        // Create PDF embed with multiple fallback methods
        function createPDFEmbed(pdfPath) {
            const device = getDeviceType();
            
            // For devices that can't embed PDFs properly, show fallback
            if (!device.canEmbedPDF) {
                return `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f0f0f0;color:#333;text-align:center;padding:20px;">
                    <div>
                        <p style="margin-bottom:20px;">PDF viewing on this device may require downloading.</p>
                        <a href="${pdfPath}" target="_blank" style="color:#000;text-decoration:underline;font-size:18px;">Open PDF in new tab</a>
                    </div>
                </div>`;
            }
            
            // For iPads and tablets, use enhanced iframe with better scrolling
            if (device.isIPad) {
                return `<div class="pdf-container">
                    <iframe src="${pdfPath}#view=FitH&toolbar=1&navpanes=0&scrollbar=1" 
                            style="width:100%;min-height:150vh;border:none;" 
                            allow="fullscreen"
                            sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
                    </iframe>
                </div>`;
            }
            
            // For Android tablets, try object embed first, then iframe
            if (device.isAndroidTablet) {
                return `<div class="pdf-embed-container">
                    <object data="${pdfPath}" type="application/pdf" style="width:100%;min-height:150vh;">
                        <iframe src="${pdfPath}" style="width:100%;min-height:150vh;border:none;"></iframe>
                    </object>
                </div>`;
            }
            
            // For desktop, use standard iframe
            return `<iframe src="${pdfPath}" style="width:100%;height:100%;border:none;"></iframe>`;
        }

        // Enhanced touch/click handling
        function handleAction(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (isDragging) return;
            
            const target = e.currentTarget;
            const action = target.dataset.action;
            const pdfPath = target.dataset.pdf;
            const projectName = target.dataset.project;
            
            if (action === 'about') {
                openAbout();
            } else if (action === 'contact') {
                openContact();
            } else if (pdfPath && projectName) {
                openPDF(pdfPath, projectName);
            }
        }

        // Add event listeners to all interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            const aboutBtn = document.querySelector('[data-action="about"]');
            const contactBtn = document.querySelector('[data-action="contact"]');
            const projectItems = document.querySelectorAll('.project-item');
            
            if (aboutBtn) {
                aboutBtn.addEventListener('click', handleAction);
                aboutBtn.addEventListener('touchend', handleAction);
            }
            
            if (contactBtn) {
                contactBtn.addEventListener('click', handleAction);
                contactBtn.addEventListener('touchend', handleAction);
            }
            
            projectItems.forEach(item => {
                item.addEventListener('click', handleAction);
                item.addEventListener('touchend', handleAction);
            });
        });

        function openPDF(pdfPath, projectName) {
            if (openPDFs[projectName]) {
                closePDF(projectName);
                return;
            }

            const viewerId = 'pdfViewer_' + projectName.replace(/\s+/g, '_');
            const viewer = document.createElement('div');
            viewer.className = 'pdf-viewer active';
            viewer.id = viewerId;
            viewer.style.zIndex = ++highestZIndex;
            
            const randomX = -(Math.random() * 100);
            const randomY = Math.random() * 50;
            viewer.style.transform = `translate3d(${randomX}px, ${randomY}px, 0)`;
            
            const pdfContent = createPDFEmbed(pdfPath);
            
            viewer.innerHTML = `
                <div class="drag-handle" data-viewer="${viewerId}"></div>
                <button class="pdf-close" onclick="closePDF('${projectName}')">×</button>
                ${pdfContent}
            `;
            
            document.body.appendChild(viewer);
            
            openPDFs[projectName] = {
                viewerId: viewerId,
                element: viewer
            };
            
            dragData[viewerId] = {
                xOffset: randomX,
                yOffset: randomY,
                isDragging: false
            };
        }

        function openAbout() {
            if (openPDFs['about']) {
                closePDF('about');
                return;
            }

            const viewerId = 'aboutViewer';
            const viewer = document.createElement('div');
            viewer.className = 'pdf-viewer active';
            viewer.id = viewerId;
            viewer.style.zIndex = ++highestZIndex;
            
            const randomX = -(Math.random() * 100);
            const randomY = Math.random() * 50;
            viewer.style.transform = `translate3d(${randomX}px, ${randomY}px, 0)`;
            
            viewer.innerHTML = `
                <div class="drag-handle" data-viewer="${viewerId}"></div>
                <button class="close-pdf" onclick="closePDF('about')">×</button>
                <div class="about-content">
                    <p>As a fashion historian, theorist, and writer based in London, my work is deeply rooted in uncovering and amplifying the often-overlooked histories of Afro-Latina and Caribbean women. Fashion, for me, is not merely a study of garments and aesthetics but a vital lens through which to examine cultural identity, resistance, and the legacies of colonialism. My research is driven by a decolonial framework, which challenges dominant narratives and seeks to recenter marginalised voices within fashion history.</p>
                </div>
            `;
            
            document.body.appendChild(viewer);
            
            openPDFs['about'] = {
                viewerId: viewerId,
                element: viewer
            };
            
            dragData[viewerId] = {
                xOffset: randomX,
                yOffset: randomY,
                isDragging: false
            };
        }

        function openContact() {
            if (openPDFs['contact']) {
                closePDF('contact');
                return;
            }

            const viewerId = 'contactViewer';
            const viewer = document.createElement('div');
            viewer.className = 'pdf-viewer active';
            viewer.id = viewerId;
            viewer.style.zIndex = ++highestZIndex;
            viewer.style.width = 'min(500px, 80vw)';
            viewer.style.height = '200px';
            
            const randomX = -(Math.random() * 100);
            const randomY = Math.random() * 50;
            viewer.style.transform = `translate3d(${randomX}px, ${randomY}px, 0)`;
            
            viewer.innerHTML = `
                <div class="drag-handle" data-viewer="${viewerId}"></div>
                <button class="close-pdf" onclick="closePDF('contact')">×</button>
                <div class="contact-content">
                    <p>catalinachaverrabrown@gmail.com</p>
                    <a href="https://www.instagram.com/catalinachaverrabrown/?utm_source=ig_web_button_share_sheet" target="_blank">@catalinachaverrabrown</a>
                </div>
            `;
            
            document.body.appendChild(viewer);
            
            openPDFs['contact'] = {
                viewerId: viewerId,
                element: viewer
            };
            
            dragData[viewerId] = {
                xOffset: randomX,
                yOffset: randomY,
                isDragging: false
            };
        }

        function closePDF(projectName) {
            if (openPDFs[projectName]) {
                const viewerId = openPDFs[projectName].viewerId;
                const viewer = openPDFs[projectName].element;
                viewer.remove();
                delete openPDFs[projectName];
                delete dragData[viewerId];
            }
        }

        // Enhanced drag functionality with better touch support
        function dragStart(e) {
            const dragHandle = e.target;
            if (!dragHandle.classList.contains('drag-handle')) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            const viewerId = dragHandle.dataset.viewer;
            if (!dragData[viewerId]) return;
            
            const viewer = document.getElementById(viewerId);
            viewer.style.zIndex = ++highestZIndex;
            
            const data = dragData[viewerId];
            
            let clientX, clientY;
            if (e.type === "touchstart") {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            
            data.initialX = clientX - data.xOffset;
            data.initialY = clientY - data.yOffset;
            data.isDragging = true;
            data.currentViewerId = viewerId;
            
            isDragging = true;
            viewer.classList.add('dragging');
        }

        function dragEnd(e) {
            Object.values(dragData).forEach(data => {
                if (data.isDragging) {
                    data.isDragging = false;
                    const viewer = document.getElementById(data.currentViewerId);
                    if (viewer) viewer.classList.remove('dragging');
                }
            });
            
            setTimeout(() => {
                isDragging = false;
            }, 100);
        }

        function drag(e) {
            const activeData = Object.values(dragData).find(data => data.isDragging);
            if (!activeData) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            let clientX, clientY;
            if (e.type === "touchmove") {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            
            activeData.currentX = clientX - activeData.initialX;
            activeData.currentY = clientY - activeData.initialY;
            activeData.xOffset = activeData.currentX;
            activeData.yOffset = activeData.currentY;

            const viewer = document.getElementById(activeData.currentViewerId);
            if (viewer) {
                viewer.style.transform = `translate3d(${activeData.currentX}px, ${activeData.currentY}px, 0)`;
            }
        }

        // Event listeners with improved touch handling
        document.addEventListener('mousedown', dragStart, { passive: false });
        document.addEventListener('mouseup', dragEnd, { passive: false });
        document.addEventListener('mousemove', drag, { passive: false });

        document.addEventListener('touchstart', dragStart, { passive: false });
        document.addEventListener('touchend', dragEnd, { passive: false });
        document.addEventListener('touchmove', drag, { passive: false });

        // Prevent default touch behaviors that might interfere
        document.addEventListener('touchstart', function(e) {
            if (e.target.classList.contains('drag-handle')) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const openPdfNames = Object.keys(openPDFs);
                if (openPdfNames.length > 0) {
                    if (e.shiftKey) {
                        openPdfNames.forEach(name => closePDF(name));
                    } else {
                        closePDF(openPdfNames[openPdfNames.length - 1]);
                    }
                }
            }
        });

        // Prevent zooming on double tap (iOS Safari)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>